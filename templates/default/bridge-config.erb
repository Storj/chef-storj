{
  "application": {
    "mirrors": <%= @application_mirrors %>,
    "privateKey": "<%= @application_privatekey %>"
  },
  "server": {
    "host": "<%= @server_host %>",
    "timeout": <%= @server_timeout %>,
    "port": <%= @server_port %>,
    "ssl": {
      "cert": <%= @server_ssl_cert %>
    },
    "public": {
      "host": "<%= @server_public_host %>",
      "port": <%= @server_public_port %>
    }
  },
  "storage": [
  <% @storage.each_with_index do |storage_node_obj, idx| %>
    <% storage_node = @storage[storage_node_obj[0]] %>
    {
      "name": "<%= storage_node['name'] %>",
      "host": "<%= storage_node['host'] %>",
      "port": <%= storage_node['port'] %>,
      "ssl": <%= storage_node['ssl'] %>,
      "user": "<%= storage_node['user'] %>",
      "pass": "<%= storage_node['pass'] %>",
      "mongos": {
        "checkServerIdentity": <%= storage_node['mongos']['checkServerIdentity'] %>,
        "ssl": <%= storage_node['mongos']['ssl'] %>,
        "sslValidate": <%= storage_node['mongos']['sslValidate'] %>
      }
    <% if ( idx + 1 ) == @storage.length %>
    }
    <% else %>
    },
    <% end %>
  <% end %>
  ],
  "complex": {
    "rpcUrl": "<%= @complex_rpcurl %>",
    "rpcUser": "<%= @complex_rpcuser %>",
    "rpcPassword": "<%= @complex_rpcpassword %>"
  },
  "mailer": {
    "host": "<%= @mailer_host %>",
    "port": <%= @mailer_port %>,
    "auth": {
      "user": "<%= @mailer_auth_user %>",
      "pass": "<%= @mailer_auth_pass %>"
    },
    "secure": <%= @mailer_secure %>,
    "from": "<%= @mailer_from %>"
  }
}
